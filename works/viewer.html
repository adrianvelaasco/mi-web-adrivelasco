<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Works - Adrián Velasco</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <script>
        function checkRedirect() {
            if (window.innerWidth < 768) {
                window.location.href = "viewer_mobile.html" + window.location.search;
            } else if (window.innerWidth < 1024) {
                window.location.href = "viewer_tablet.html" + window.location.search;
            }
        }
        window.addEventListener('resize', checkRedirect);
        checkRedirect();
    </script>

    <!-- Global CSS -->
    <link href="../css/normalize.css" rel="stylesheet" type="text/css">
    <link href="../css/webflow.css" rel="stylesheet" type="text/css">
    <link href="../css/adrivelasco-88205b.webflow.css" rel="stylesheet" type="text/css">
    <link href="../css/components/navbar.css" rel="stylesheet" type="text/css">

    <style>
        body {
            overflow: hidden;
            /* Desktop lock */
            background-color: #ffffff;
            color: #0000ff;
            font-family: 'Syne', sans-serif;
            margin: 0;
            -webkit-font-smoothing: antialiased;
        }

        /* Page Container */
        .work-detail-container {
            padding-top: 40px;
            padding-bottom: 80px;
            padding-left: 8%;
            padding-right: 8%;
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            height: 100vh;
            box-sizing: border-box;
            position: relative;
            z-index: 5;
        }

        /* Transition Wrapper */
        #work-content-wrapper {
            width: 100%;
            height: 100%;
            transition: opacity 0.4s ease, transform 0.4s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .fade-out {
            opacity: 0;
            transform: translateY(10px);
        }

        /* Title */
        .work-title {
            font-family: 'Syne', sans-serif;
            font-weight: 800;
            font-size: clamp(1.2rem, 3.5vw, 3rem);
            text-transform: uppercase;
            text-align: center;
            line-height: 1.1;
            margin-top: 0;
            margin-bottom: 10px;
            width: 100%;
        }

        /* Content Layout */
        .content-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            width: 100%;
            align-items: start;
            flex: 1;
            min-height: 0;
            /* Allow inner scroll */
        }

        /* Video Column */
        .video-column {
            display: flex;
            flex-direction: column;
            gap: 30px;
            width: 100%;
            max-height: calc(100vh - 220px);
            overflow-y: auto;
            padding-bottom: 100px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .video-column::-webkit-scrollbar {
            display: none;
        }

        /* Video Wrapper */
        .video-wrapper {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #000;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 255, 0.15);
            position: relative;
            flex-shrink: 0;
        }

        .video-wrapper iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Info Column */
        .info-column {
            display: flex;
            flex-direction: column;
            gap: 30px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 6px;
            border: 1px solid rgba(0, 0, 255, 0.1);
            height: fit-content;
        }

        .info-text p {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: justify;
        }

        .info-text p:last-child {
            margin-bottom: 0;
        }

        /* Credits */
        .credits-box {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            font-size: 0.9rem;
            line-height: 1.5;
            border-top: 1px solid rgba(0, 0, 255, 0.2);
            padding-top: 20px;
        }

        .credits-row {
            flex: 0 0 auto;
        }

        .credits-label {
            font-weight: 700;
            text-transform: uppercase;
            display: block;
            margin-bottom: 4px;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Navigation Arrows (Vertical Paddles) */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            /* Much wider now */
            height: 220px;
            /* Taller */
            background: rgba(255, 255, 255, 0.85);
            /* White glassmorphism */
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 0, 255, 0.25);
            /* Solid presence */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            color: #0000ff;
            box-shadow: 0 0 15px rgba(0, 0, 255, 0.04);
            /* Subtle glow */
        }

        .prev-arrow {
            left: 0;
            border-radius: 0 15px 15px 0;
            border-left: none;
        }

        .next-arrow {
            right: 0;
            border-radius: 15px 0 0 15px;
            border-right: none;
        }

        .nav-arrow:hover {
            background: #0000ff;
            color: #ffffff;
            width: 68px;
            /* Dramatic expansion */
        }

        .nav-arrow:active,
        .nav-arrow.active {
            background: #0000bb;
            color: #ffffff;
            transform: translateY(-50%) scaleX(0.8);
            transition: all 0.1s ease;
        }

        .nav-arrow svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* Responsive */
        @media (max-width: 1023px) {
            body {
                overflow-y: auto;
            }

            .work-detail-container {
                height: auto;
                padding-top: 80px;
                padding-left: 6%;
                padding-right: 6%;
            }

            .content-layout {
                grid-template-columns: 1fr;
                display: flex;
                flex-direction: column;
            }

            .info-column {
                order: -1;
                width: 100%;
                box-sizing: border-box;
            }

            .video-column {
                max-height: none;
                overflow: visible;
                padding-bottom: 40px;
            }

            .nav-arrow {
                height: 100px;
                width: 20px;
            }

            .nav-arrow:hover {
                width: 30px;
            }
        }
    </style>

    <!-- Google Fonts Script -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">
        WebFont.load({ google: { families: ["Syne:400,500,600,700,800"] } });
    </script>
</head>

<body>

    <!-- Unified Navbar -->
    <div id="navbar-placeholder"></div>

    <!-- Navigation Arrows -->
    <div class="nav-arrow prev-arrow" id="prevWork" aria-label="Previous work">
        <svg viewBox="0 0 24 24">
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
        </svg>
    </div>
    <div class="nav-arrow next-arrow" id="nextWork" aria-label="Next work">
        <svg viewBox="0 0 24 24">
            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
    </div>

    <!-- Page Content -->
    <div class="work-detail-container">
        <div id="work-content-wrapper">
            <h1 class="work-title" id="display-title">LOADING...</h1>
            <div class="content-layout">
                <!-- Videos Container -->
                <div class="video-column" id="display-videos">
                    <!-- Videos will be injected here -->
                </div>

                <!-- Info Column -->
                <div class="info-column" id="display-info">
                    <div class="info-text" id="display-desc">
                        <!-- Description injected -->
                    </div>
                    <div class="credits-box" id="display-credits">
                        <!-- Credits injected -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6838b915c2ab266fee8bc5b1"
        type="text/javascript"></script>
    <script src="../js/components/navbar.js" defer></script>
    <script src="../js/components/background-waves.js" defer></script>

    <script>
        // WORKS DATABASE
        const worksData = [
            {
                id: 'personas',
                title: 'PERSONAS QUE QUIZÁ CONOZCAS. 2025',
                videos: ['kRRLhsWD46s'],
                desc: 'work-personas-desc',
                credits: [
                    { label: 'Composers', value: 'Adri Velasco, Fran Escobar,<br>Alejandro Mondragón, Alberto Hijón' },
                    { label: 'Performer', value: 'Gabriel Brockway' },
                    { label: 'Musicians', value: 'Violeta Casado, Javier Díaz, Paula Ortega, María Calvo' }
                ]
            },
            {
                id: 'ebdvp',
                title: 'IN SEARCH OF THE PERFECT VIDEO. 2025',
                videos: ['PiDJJbJzv9I', 'f70KsUdA6Fk'],
                desc: 'work-ebdvp-desc',
                credits: [
                    { label: 'TEXT', value: 'Adrián Velasco' },
                    { label: 'VOICE', value: 'Eduardo Velasco' }
                ]
            },
            {
                id: 'pianogames',
                title: 'PIANOGAMES. 2025',
                videos: ['hMIFmIM2tNQ'],
                desc: 'work-pianogames-desc',
                credits: [
                    { label: 'Minigames', value: 'Adrián Velasco' },
                    { label: 'Pianist', value: 'Pablo Gil' }
                ]
            },
            {
                id: 'rumble',
                title: 'RUMBLE. 2025',
                videos: ['QhXVTFkVde4'],
                desc: 'work-rumble-desc',
                credits: [
                    { label: 'Dates', value: '1 FEB. Auditorio Nacional de España<br>7 MAR. Centro Cultural Villa de Nerja' }
                ]
            },
            {
                id: 'osc',
                title: 'OSC PROTOCOL. 2024',
                videos: ['SJr9lo4Ses0', 'T-8SwfE1cHs'],
                desc: 'work-osc-desc',
                credits: [
                    { label: 'Piano', value: 'Pablo Gil' },
                    { label: 'Dates', value: '9 MAY. Ateneo de Madrid<br>18 MAY. Real Conservatorio Superior de Música de Madrid' }
                ]
            },
            {
                id: 'three-years',
                title: 'THREE YEARS OF EVOLUTION. 2024',
                videos: ['0w1TvFGLKVU'],
                desc: 'work-tyoe-desc',
                credits: [
                    { label: 'Work', value: 'Adri Velasco' },
                    { label: 'Performer', value: 'Paula Ortega' },
                    { label: 'Stylist', value: 'Alba Roselló' },
                    { label: 'Filmed by', value: 'Iris Casilari<br>Into' },
                    { label: 'Edited by', value: 'Iris Casilari<br>Adri Velasco' }
                ]
            },
            {
                id: 'game-of-life',
                title: 'GAME OF LIFE. 2024',
                videos: ['9p8PEvWN9Lk', '5JbYX-IOZ_4'],
                desc: 'work-life-desc',
                credits: [
                    { label: 'Design', value: 'Adrián Velasco' },
                    { label: 'Code', value: 'Fran Escobar' }
                ]
            },
            {
                id: 'another-music',
                title: 'ANOTHER MUSIC CONSERVATORY. 2024',
                videos: ['Pp1SH6bG458'],
                desc: 'work-amc-desc',
                credits: []
            },
            {
                id: 'lespontanea',
                title: 'LESPONTANEA. 2023',
                videos: ['KumuBWSrm3A'],
                desc: 'work-espontanea-desc',
                credits: [
                    { label: 'Work', value: 'Adrián Velasco' },
                    { label: 'Text', value: 'Alba Roselló' },
                    { label: 'Voice', value: 'Samuel Sarrión' }
                ]
            },
            {
                id: 'minuit',
                title: 'MINUIT TOUJOURS ARRIVE. 2023',
                videos: ['LCkRsxdqyDU'],
                desc: 'work-minuit-desc',
                credits: [
                    { label: 'Premiered by', value: 'Trio Arbós<br>at Teatro de la Zarzuela' },
                    { label: 'Awards', value: 'II PREMIO DE COMPOSICIÓN TZ-RCSMM' }
                ]
            },
            {
                id: 'cisne',
                title: 'CISNE Y CERDO. 2022',
                videos: ['3nSSqvQ-25o'],
                desc: 'work-cisne-desc',
                credits: [
                    { label: 'Text', value: 'Dionisio Cañas' },
                    { label: 'Dates', value: '21 JUN. Sala 400 Museo Reina Sofía, Madrid' }
                ]
            }
        ];

        let currentIndex = 0;

        function renderWork(index, updateURL = true) {
            const work = worksData[index];
            if (!work) return;

            // Update URL cleanly: /work/id
            if (updateURL) {
                // Check if we are already using clean path or query param
                const newPath = '/work/' + work.id;
                // Use the new path visually
                window.history.pushState({ index: index }, '', newPath);
            }

            const wrapper = document.getElementById('work-content-wrapper');
            wrapper.classList.add('fade-out');

            setTimeout(() => {
                // Update Title
                document.getElementById('display-title').textContent = work.title;

                // Update Videos
                const videoColumn = document.getElementById('display-videos');
                videoColumn.innerHTML = work.videos.map(id => `
          <div class="video-wrapper">
            <iframe src="https://www.youtube.com/embed/${id}?modestbranding=1&rel=0&showinfo=0" 
                    allowfullscreen></iframe>
          </div>
        `).join('');

                // Update Description (with translation support)
                const descDiv = document.getElementById('display-desc');
                if (work.desc) {
                    descDiv.innerHTML = `<p data-t="${work.desc}"></p>`;
                } else {
                    descDiv.innerHTML = '';
                }

                // Update Credits
                const creditsBox = document.getElementById('display-credits');
                creditsBox.innerHTML = work.credits.map(c => `
          <div class="credits-row">
            <span class="credits-label">${c.label}</span>
            ${c.value}
          </div>
        `).join('');

                // Trigger translation re-run if script is ready
                if (window.navComponent && window.navComponent.updatePageTranslations) {
                    window.navComponent.updatePageTranslations();
                }

                wrapper.classList.remove('fade-out');
            }, 400);
        }

        // Navigation logic
        document.getElementById('prevWork').addEventListener('click', () => {
            currentIndex = (currentIndex > 0) ? currentIndex - 1 : worksData.length - 1;
            renderWork(currentIndex);
        });

        document.getElementById('nextWork').addEventListener('click', () => {
            currentIndex = (currentIndex < worksData.length - 1) ? currentIndex + 1 : 0;
            renderWork(currentIndex);
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                document.getElementById('prevWork').classList.add('active');
                currentIndex = (currentIndex > 0) ? currentIndex - 1 : worksData.length - 1;
                renderWork(currentIndex);
            } else if (e.key === 'ArrowRight') {
                document.getElementById('nextWork').classList.add('active');
                currentIndex = (currentIndex < worksData.length - 1) ? currentIndex + 1 : 0;
                renderWork(currentIndex);
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft') {
                document.getElementById('prevWork').classList.remove('active');
            } else if (e.key === 'ArrowRight') {
                document.getElementById('nextWork').classList.remove('active');
            }
        });

        // Handle back/forward browser buttons
        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.index !== undefined) {
                currentIndex = event.state.index;
                renderWork(currentIndex, false); // false to avoid pushState loop
            } else {
                // Try to find by URL if no state
                const urlParams = new URLSearchParams(window.location.search);
                const workId = urlParams.get('work');
                if (workId) {
                    const found = worksData.findIndex(w => w.id === workId);
                    if (found !== -1) {
                        currentIndex = found;
                        renderWork(currentIndex, false);
                    }
                }
            }
        });

        // Initial Load based on URL
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const workId = urlParams.get('work');
            if (workId) {
                const found = worksData.findIndex(w => w.id === workId);
                if (found !== -1) currentIndex = found;
            }
            renderWork(currentIndex, true);
        });
    </script>

</body>

</html>